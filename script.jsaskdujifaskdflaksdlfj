const questions = [
	{
		"title": "Hello + Hi ?",
		"answer1": "Hello",
		"answer2": "Hi",
		"answer3": "HelloHi",
		"answer4": "HiHello",
		"answer": 3
	},
	{
		"title": "nri)$lkEf(9E(%3km7E$",
		"answer1": "%z(*7pU4sW&*l)$(*W(#",
		"answer2": "$s632c2wxs&4862&jWi2",
		"answer3": "(eT)b8me3%ge9x$eb)*u",
		"answer4": "6)3$3WR)g$3Te8R*k%e6",
		"answer": 3
	},
	{
		"title": "3ejng)zW*52(&72(4x6T",
		"answer1": "(igy**5#xt9#a7tR$23b",
		"answer2": "(kl)5Ehqox9ip(E)%t#j",
		"answer3": "&&*E)8c)iU)*6%944(%4",
		"answer4": "la*2&j37847$)*4674)(",
		"answer": 2
	},
	{
		"title": "q**7)54E(768*(*W9*Tw",
		"answer1": "*tqt2744r9)fd*3)jl9)",
		"answer2": "43$37quop8hv23T56)$6",
		"answer3": "77($3b$8(#txm5fxhi*%",
		"answer4": "$T2c)3y5R*3((b9w*v#7",
		"answer": 2
	},
	{
		"title": "#$i)6*8lh8uu22(53RTz",
		"answer1": "3y79t&28v37(9%eol7%)",
		"answer2": "E3r9(93E)q3(l*34mE2T",
		"answer3": "(2j9%27nb)%7)gh7pj)c",
		"answer4": "3ni44233(mp8)3y98&4*",
		"answer": 1
	},
	{
		"title": "(*xUh989$33r()g#*v9W",
		"answer1": "4k$s42k2$7)9)48h*emq",
		"answer2": "*7E(((rx7)264f8Ral49",
		"answer3": "t7423c4E(3pR)*pvy9(3",
		"answer4": "*#*37W$7)v6We4TTTch#",
		"answer": 0
	},
	{
		"title": "f7r833T9Tdh398*%2v(2",
		"answer1": "32o9Uw448um6R6c4kT(8",
		"answer2": ")243)x))*339f5o44*7(",
		"answer3": "y)#$648#9(6946$lm#(3",
		"answer4": "8y)k*$)22&r)2)2x8T2W",
		"answer": 3
	},
	{
		"title": "7*848T49&7))5698$67i",
		"answer1": "((a4vhd&898W$&4#3Tp8",
		"answer2": ")868g(dy&T#9l8(*34l4",
		"answer3": "ns((E6q673#3b)28i3((",
		"answer4": "*3(nu76g((23()72%cbU",
		"answer": 3
	},
	{
		"title": ")72*#$4*4#3#e$33t9T2",
		"answer1": "v9jR9U8gg8i6%*4$4s*4",
		"answer2": "8d($29wy335yo8#)7924",
		"answer3": "86#7*b66z*8Em5*aUi22",
		"answer4": "x(q2%%iW(R33u6%7E*#7",
		"answer": 2
	},
	{
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 1
	},
  {
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 3
	},
  {
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 1
	},
  {
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 4
	},
  {
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 3
	},
  {
		"title": "2z3EsfTc6(u6#%*)42((",
		"answer1": "n$T5(a)4(4#)tu9(4ryx",
		"answer2": ")Rv49$9s29&9i*2v7&#E",
		"answer3": "9Uw32%99$E))3#cl$($n",
		"answer4": "tqk2w7((7(t2vg7#)p2c",
		"answer": 2
	}
];

const startScreen = document.querySelector(".start");
const informationScreen = document.querySelector(".information");
const quizScreen = document.querySelector(".content");

const continueElement = document.querySelector("#continue");
continueElement.addEventListener("click", () => {
  startScreen.hidden = true;
  informationScreen.hidden = false;
});

let names = "";
let tel_num = "";
let address = "";
let prediction = "";
const formElement = document.querySelector("#user_information");
formElement.addEventListener("submit", event => {
  event.preventDefault();
  const nameElement = document.querySelector("#user_name");
  const telNumElement = document.querySelector("#user_tel_num");
  const addressElement = document.querySelector("#user_address");
  const predictionElement = document.querySelector("#user_prediction");
  
  names = nameElement.value;
  tel_num = telNumElement.value;
  address = addressElement.value;
  prediction = predictionElement.value;
  
  informationScreen.hidden = true;
  quizScreen.hidden = false;
  
  quiz();
});

let score = 0;

const quiz = () => {
  const questionElement = document.querySelector("#question");
  const answer1Element = document.querySelector("#ans_1");
  const answer2Element = document.querySelector("#ans_2");
  const answer3Element = document.querySelector("#ans_3");
  const answer4Element = document.querySelector("#ans_4");
  const pointElement = document.querySelector("#point");

  let questionNumber = 0;

  const displayQuestion = question => {
    questionElement.textContent = question.title;
    answer1Element.textContent = "A. " + question.answer1;
    answer2Element.textContent = "B. " + question.answer2;
    answer3Element.textContent = "C. " + question.answer3;
    answer4Element.textContent = "D. " + question.answer4;

    const accepted = () => {
      score++;
      nextQuestion();
    };

    const wrongAnswerOnTest2 = () => {
      nextQuestion();
    };

    const handleAnswer1 = () => {
      if (question.answer === 0) {
        accepted();
      } else {
        wrongAnswerOnTest2();
      }
    };

    const handleAnswer2 = () => {
      if (question.answer === 1) {
        accepted();
      } else {
        wrongAnswerOnTest2();
      }
    };

    const handleAnswer3 = () => {
      if (question.answer === 2) {
        accepted();
      } else {
        wrongAnswerOnTest2();
      }
    };

    const handleAnswer4 = () => {
      if (question.answer === 3) {
        accepted();
      } else {
        wrongAnswerOnTest2();
      }
    };

    const nextQuestion = () => {
      answer1Element.removeEventListener("click", handleAnswer1);
      answer2Element.removeEventListener("click", handleAnswer2);
      answer3Element.removeEventListener("click", handleAnswer3);
      answer4Element.removeEventListener("click", handleAnswer4);

      questionNumber++;

      if (questionNumber === questions.length) {
        questionElement.remove();
        answer1Element.remove();
        answer2Element.remove();
        answer3Element.remove();
        answer4Element.remove();

        pointElement.hidden = false;
        pointElement.textContent = `Bạn đã đạt được ${score}/${questions.length} điểm`;
        
        sendData();
        
        return;
      }

      displayQuestion(questions[questionNumber]);
    };

    answer1Element.addEventListener("click", handleAnswer1);
    answer2Element.addEventListener("click", handleAnswer2);
    answer3Element.addEventListener("click", handleAnswer3);
    answer4Element.addEventListener("click", handleAnswer4);

    pointElement.hidden = true;
  };

  displayQuestion(questions[0]);
};

const sendData = () => {
  alert(JSON.stringify({ names, tel_num, address, prediction, score }));
};