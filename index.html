<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Cuộc Thi Trực Tuyến Tìm Hiểu 90 Năm Hình Thành, Xây Dựng, Phát Triển Của
      Đảng Bộ Thành Phố Tuy Hòa
    </title>
    <style>
      body {
        background: url("https://cdn.glitch.com/a3d37faa-5bef-43da-8d33-45ad1c6ca7b1%2F11_a.png?v=1631630792462")
          no-repeat center center fixed;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background-repeat: no-repeat;
        background-size: cover;
        padding: 0;
        margin: 0;
      }

      .start {
        width: 700px;
        padding: 20px;
        border: 1px solid black;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.7);
      }

      .start h1 {
        text-align: center;
      }

      .options {
        display: flex;
        flex-direction: column;
      }

      .content h1 {
        border: 2px solid black;
        padding-left: 10px;
        padding-right: 10px;
      }

      .options button {
        text-align: left;
        padding: 10px 10px 10px 10px;
        margin-top: 5px;
        margin-bottom: 5px;
        background: white;
      }

      .content {
        width: 700px;
      }

      .content h3.point {
        width: 500px;
        height: 20px;
        text-align: center;
        position: absolute;
        line-height: 20px;
        left: calc(50vw - 250px);
        top: calc(50vh - 10px);
      }

      form {
        width: 400px;
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid black;
        border-radius: 20px;
        padding: 20px 20px 20px 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      form input[type="submit"] {
        margin-top: 20px;
      }

      .continue_div {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .start #continue {
        padding: 5px 5px 5px 5px;
        border: 1px solid black;
        border-radius: 7px;
      }

      .content {
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid black;
        padding: 20px;
        border-radius: 20px;
      }

      #question {
        font-size: 25px;
        padding: 5px 5px 5px 5px;
      }
    </style>

    
  </head>
  <body>
    <div class="start">
      <h1>
         Chặng 2: Từ ngày 01/10/2021 đến ngày 15/10/2021
      </h1>
      <div class="continue_div">
        <button id="continue">
          Bắt đầu
        </button>
      </div>
    </div>
    <div class="information" hidden>
      <form id="user_information">
        <div>
          <div>
            Họ và tên:
          </div>
          <input id="user_name" required />
        </div>
        <div>
          <div>
            Số điện thoại:
          </div>
          <input id="user_tel_num" type="tel" required />
        </div>
        <div>
          <div>
            Đơn vị:
          </div>
          <input id="user_address" required />
        </div>
        <div>
          <div>
            Địa chỉ liên hệ:
          </div>
          <input id="user_ress" required />
        </div>
        <div>
          <div>
            Dự đoán số lượt tham gia:
          </div>
          <input id="user_prediction" required />
        </div>
        <input type="submit" value="Tham gia cuộc thi" />
      </form>
    </div>
    <div class="content" hidden>
      <h3>Thời gian: <span id="time"></span></h3>
      <h1 id="question">
        askdjf polasdmfljfkolasd + jksdlfajfldsa = ?
      </h1>
      <div class="options">
        <button id="ans_1">
          A. 34oit0234u8t903u8i4560
        </button>
        <button id="ans_2">
          B. o0-2w3e4irt90-234it0-3
        </button>
        <button id="ans_3">
          C. 2i034ur0f234j890rt2834
        </button>
        <button id="ans_4">
          D. 90234o8irv90w34j8tv903
        </button>
      </div>
      <h3 id="point">
        awsdjikfkolajdfklasd: 0/10
      </h3>
    </div>
    <script>
      const questions = [
        {
          title:
            "Câu 1: Đoàn thanh niên dân chủ ở Tuy Hòa được thành lập vào .... tại làng .... . Hạt nhân của đoàn là các đảng viên cộng sản ở 2 chi bộ Nho Lâm và Long Tường - Phụng Tường.",
          answer1: "Cuối năm 1938, Phụng Tường",
          answer2: "Cuối năm 1938, Nho Lâm",
          answer3: "Cuối năm 1938, Long Tường",
          answer4: "Đầu năm 1938, Nho Lâm",
          answer: 1
        },
        {
          title:
            "Câu 2: Đến năm Mậu Dần (1578) vua Lê (hiệu Quang Hưng) đã cử ông vào làm quan trấn biên, ông đã chiêu mộ lưu dân ở miền ngoài, chủ yếu là vùng Thuận Quảng vào khai hoang lập ấp từ chân đèo Cù Mông đến lưu vực sông Đà Rằng. Bằng sức lao động cần cù của con người, công cuộc khai hoang lập ấp vẫn phát triển nhanh chóng. (Ông là ai ?)",
          answer1: "Lương Thế Vinh",
          answer2: "Lương Văn Chánh",
          answer3: "Nguyễn Hoàng",
          answer4: "Lê Thánh Tôn",
          answer: 1
        },
        {
          title:
            "Câu 3: Ngày 24-11-1931 tại chùa Bà (chùa Tàu) dưới chân núi Nhạn Tháp, nhân dịp Nhân dân viếng chùa rằm tháng 10 Tân Hợi, đồng chí Phạm Ngọc Bích tổ chức thành lập chi bộ Đảng cộng sản đầu tiên ở Tuy Hòa gồm bao nhiêu người ? Ai được cử làm bí thư chi bộ ?",
          answer1: "5 người, đồng chí Trương Mộng Quyền làm bí thư chi bộ",
          answer2: "3 người, đồng chí Lê Tấn Thăng làm bí thư chi bộ",
          answer3: "5 người, đồng chí Trương Nở làm bí thư chi bộ",
          answer4: "4 người, đồng chí Trương Nở làm bí thư chi bộ",
          answer: 2
        },
        {
          title:
            "Câu 4: Trên cơ sở phát triển của các chi bộ Đảng, đòi hỏi phải có sự lãnh đạo thống nhất và có hiệu quả hơn, phủ ủy Tuy Hòa được thành lập vào tháng ...năm... . Đồng chí .... được cử làm bí thư phủ ủy",
          answer1: "Tháng 11/1937. Phan Lưu Thanh",
          answer2: "Tháng 9/1937. Phan Lưu Thanh",
          answer3: "Tháng 9/1937. Phan Văn Dự",
          answer4: "Tháng 11/1937. Phan Văn Dự",
          answer: 3
        },
        {
          title:
            "Câu 5: Tháng 11/1935 chi bộ Nho Lâm được thành lập gồm bao nhiêu đồng chí ? Do ai làm bí thư chi bộ ?",
          answer1: "4 đồng chí, Phan Thôi làm bí thư chi bộ",
          answer2: "5 đồng chí, Nguyễn Thanh Hương làm bí thư chi bộ",
          answer3: "2 đồng chí, Phan Thôi làm bí thư chi bộ",
          answer4: "3 đồng chí, Trần Hào làm bí thư chi bộ",
          answer: 3
        },
        {
          title:
            "Câu 6: Nơi nào ở thị xã Tuy Hòa ngày 23/8/1945, Đảng bộ và Việt Minh thị xã chủ động lãnh đạo nhân dân 7 phường và các làng của tổng Hòa Bình, Hòa Đa, Hòa Tường, Hòa Đồng tập trung trên 7.000 người thị xã biểu dương lực lượng chiếm đồn Khố Xanh, hạ cờ bù nhìn, treo cờ đỏ sao vàng tuyên bố chính quyền về tay nhân dân ? ",
          answer1: "Bến xe thị xã",
          answer2: "Nhà ga thị xã",
          answer3: "Sân bay thị xã",
          answer4: "Bến xe ngựa thị xã",
          answer: 2
        },
        {
          title:
            "Câu 7: Theo sách Đại Nam Thống Nhất Chí thì năm .... vua Lê Thánh Tôn cho mờ mang bờ cõi của quốc gia Đại Việt về phía Nam đến núi Thạch Bi (núi Đá Bia) nhưng chỉ lấy mốc địa giới từ núi Cù Mông trở ra nhập vào Quảng Nam.",
          answer1: "1472",
          answer2: "1471",
          answer3: "1473",
          answer4: "1470",
          answer: 1
        },
        {
          title:
            "Câu 8: Ngày 24/11/1931 chi bộ cộng sản đầu tiên của Tuy Hòa ra đời đến năm 1935 có thêm bao nhiêu chi bộ được thành lập ở Tuy Hòa ?",
          answer1: "1",
          answer2: "2",
          answer3: "4",
          answer4: "3",
          answer: 1
        },
        {
          title:
            "Câu 9: Từ năm 1996 đến năm 2020, Đảng bộ thành phố Tuy Hòa đã trải qua mấy kỳ Đại hội?",
          answer1: "8",
          answer2: "5",
          answer3: "7",
          answer4: "6",
          answer: 3
        },
        {
          title:
            "Câu 10: Trong chiến dịch Đông Xuân 1953-1954, quân dân Tuy Hòa, Phú Yên đã chia lửa với cả nước đánh bại chiến dịch nào của thực dân Pháp ở Phú Yên ?",
          answer1: "Chiến dịch At-Ti-La",
          answer2: "Chiến dịch Điện Biên Phủ",
          answer3: "Chiến dịch Atlăng",
          answer4: "Chiến dịch A-Rê-Tuy",
          answer: 2
        },
        {
          title:
            "Câu 11: Từ tháng 9/1945 đến tháng 12/1946. Trước yêu cầu của tình hình mới, Tỉnh ủy quyết định thành lập Phủ ủy lâm thời phủ Tuy Hòa gồm 7 đồng chí Trần Sinh Từ, Lê Tấn Thăng, Nguyễn Quốc Thoại, Phan Hương, Phan Văn Dự... Đồng chí nào được cử làm Bí thư Phủ ủy ?",
          answer1: "Nguyễn Quốc Thoại",
          answer2: "Lê Tấn Thăng",
          answer3: "Phan Văn Dự",
          answer4: "Trần Sinh Từ",
          answer: 3
        },
        {
          title:
            "Câu 12: Chi bộ cộng sản đầu tiên ở Phú Yên được thành lập vào ngày tháng năm nào ?",
          answer1: "5-11-1930",
          answer2: "5-10-1930",
          answer3: "5-10-1931",
          answer4: "5-11-1931",
          answer: 1
        },
        {
          title:
            "Câu 13: Trọng tâm hoạt động của đảng bộ tỉnh được chuyển về phía Nam vào thời gian nào ?",
          answer1: "Đầu năm 1930",
          answer2: "Cuối năm 1931",
          answer3: "Cuối năm 1930",
          answer4: "Đầu năm 1931",
          answer: 1
        },
        {
          title:
            "Câu 14: Ai là người thay mặt Tỉnh ủy lâm thời công nhận chi bộ Nhạn Tháp ?",
          answer1: "Đồng chí Lê Tấn Thăng",
          answer2: "Đồng chí Phan Lưu Thanh",
          answer3: "Đồng chí Trần Hào",
          answer4: "Đồng chí Trịnh Ba",
          answer: 1
        },
        {
          title:
            "Câu 15: Năm 1892, giặc Pháp lùng sục bắt được ông , sau thời gian dụ hàng không được, chúng đưa ra bãi cát rừng xã An Dân xử chém, trước khi chết ông tỏ rỏ là một người kiên quyết chống Pháp và để lại câu nói đầy khí phách 'Ta không hàng, thà chịu cảnh đầu rơi', năm ấy ông mới 47 tuổi. Ông là ai ?",
          answer1: "Ma Bí",
          answer2: "Ma Kiên",
          answer3: "Phó Đẩy",
          answer4: "Nguyễn Hào Sự",
          answer: 3
        }
      ];

      const startScreen = document.querySelector(".start");
      const informationScreen = document.querySelector(".information");
      const quizScreen = document.querySelector(".content");

      const continueElement = document.querySelector("#continue");
      continueElement.addEventListener("click", () => {
        startScreen.hidden = true;
        informationScreen.hidden = false;
      });

      let names = "";
      let tel_num = "";
      let address = "";
      let prediction = "";
      let ress = "";

      const formElement = document.querySelector("#user_information");
      formElement.addEventListener("submit", event => {
        event.preventDefault();
        const nameElement = document.querySelector("#user_name");
        const telNumElement = document.querySelector("#user_tel_num");
        const addressElement = document.querySelector("#user_address");
        const ressElement = document.querySelector("#user_ress");
        const predictionElement = document.querySelector("#user_prediction");

        names = nameElement.value;
        tel_num = telNumElement.value;
        address = addressElement.value;
        prediction = predictionElement.value;
        ress = ressElement.value;

        informationScreen.hidden = true;
        quizScreen.hidden = false;

        quiz();
      });

      let score = 0;
      let time = 0;

      const quiz = () => {
        const questionElement = document.querySelector("#question");
        const answer1Element = document.querySelector("#ans_1");
        const answer2Element = document.querySelector("#ans_2");
        const answer3Element = document.querySelector("#ans_3");
        const answer4Element = document.querySelector("#ans_4");
        const pointElement = document.querySelector("#point");
        const timeElement = document.querySelector("#time");

        const startTime = (Date.now() / 1000) | 0;

        const displayTime = () => {
          const currentTime = (Date.now() / 1000) | 0;

          const secondsElapsed = currentTime - startTime;
          time = secondsElapsed;

          const seconds = secondsElapsed % 60;
          const minutes = (secondsElapsed / 60) | 0;

          if (minutes > 0)
            timeElement.textContent = `${minutes} phút ${seconds} giây`;
          else timeElement.textContent = `${seconds} giây`;
        };

        const interval = setInterval(displayTime, 1000);
        displayTime();

        let questionNumber = 0;

        const displayQuestion = question => {
          questionElement.textContent = question.title;
          answer1Element.textContent = "A. " + question.answer1;
          answer2Element.textContent = "B. " + question.answer2;
          answer3Element.textContent = "C. " + question.answer3;
          answer4Element.textContent = "D. " + question.answer4;

          const accepted = () => {
            score++;
            nextQuestion();
          };

          const wrongAnswerOnTest2 = () => {
            nextQuestion();
          };

          const handleAnswer1 = () => {
            if (question.answer === 0) {
              accepted();
            } else {
              wrongAnswerOnTest2();
            }
          };

          const handleAnswer2 = () => {
            if (question.answer === 1) {
              accepted();
            } else {
              wrongAnswerOnTest2();
            }
          };

          const handleAnswer3 = () => {
            if (question.answer === 2) {
              accepted();
            } else {
              wrongAnswerOnTest2();
            }
          };

          const handleAnswer4 = () => {
            if (question.answer === 3) {
              accepted();
            } else {
              wrongAnswerOnTest2();
            }
          };

          const nextQuestion = () => {
            answer1Element.removeEventListener("click", handleAnswer1);
            answer2Element.removeEventListener("click", handleAnswer2);
            answer3Element.removeEventListener("click", handleAnswer3);
            answer4Element.removeEventListener("click", handleAnswer4);

            questionNumber++;

            if (questionNumber === questions.length) {
              questionElement.remove();
              answer1Element.remove();
              answer2Element.remove();
              answer3Element.remove();
              answer4Element.remove();

              pointElement.hidden = false;
              pointElement.textContent = `Bạn đã đạt được ${score}/${questions.length} điểm. Cảm ơn bạn đã tham gia cuộc thi.`;

              clearInterval(interval);

              sendData();
              return;
            }

            displayQuestion(questions[questionNumber]);
          };

          answer1Element.addEventListener("click", handleAnswer1);
          answer2Element.addEventListener("click", handleAnswer2);
          answer3Element.addEventListener("click", handleAnswer3);
          answer4Element.addEventListener("click", handleAnswer4);

          pointElement.hidden = true;
        };

        displayQuestion(questions[0]);
      };

      const sendData = () => {
        const urlObject = new URL(
          "https://script.google.com/macros/s/AKfycbxmj_nZgvI2pmjQFSrUNQL07dWUdgQGBbsH3TH5bTnKUMD9VE3Hhxv0O1Vii_1eGYKL/exec"
        );
        const urObject = new URL(
          "https://script.google.com/macros/s/AKfycbyJI4XzwaS81CEZPH_QdWQ9_cYOkEW2Nccu1OZisQ_8w8LZVQXfVMi_Q-S0A09hFLLM/exec"
        );
        urlObject.searchParams.set("names", names);
        urlObject.searchParams.set("tel_num", tel_num);
        urlObject.searchParams.set("address", address);
        urlObject.searchParams.set("ress", ress);
        urlObject.searchParams.set("prediction", prediction);
        urlObject.searchParams.set("score", score);
        urlObject.searchParams.set("time", time);
        urObject.searchParams.set("names", names);
        urObject.searchParams.set("tel_num", tel_num);
        urObject.searchParams.set("address", address);
        urObject.searchParams.set("ress", ress);
        urObject.searchParams.set("prediction", prediction);
        urObject.searchParams.set("score", score);
        urObject.searchParams.set("time", time);

        fetch(urlObject.toString());
        fetch(urObject.toString());
      };
    </script>
  </body>
</html>
